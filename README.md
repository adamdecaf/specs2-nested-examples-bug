# specs2-nested-examples-bug

There seems to be a bug with nesting specs2 examples in versions `2.4.2` and `3.4` on scala versions `2.10.5` and `2.11.6`.

I would expect that the first example would fail, because there are nested examples in it that are wrong. The tests being ran are the same for each version pair. Please refer to the [specs2 issue](https://github.com/etorreborre/specs2/issues/360) for more details.

## Specs2 2.4.2

#### Scala 2.10.5

```
> ++ 2.10.5
[info] Setting version to 2.10.5
[info] Reapplying settings...
[info] Set current project to specs2-nested-examples-bug (in build file:/Users/adam/src/mine/specs2-nested-examples-bug/)
> test
[info] Updating {file:/Users/adam/src/mine/specs2-nested-examples-bug/}specs2-nested-examples-bug...
[info] Resolving org.scala-lang#scala-library;2.10.5 ...
[info] Resolving org.specs2#specs2_2.10;2.4.2 ...
[info] Resolving org.scala-lang#scala-compiler;2.10.4 ...
[info] Resolving org.scala-lang#scala-reflect;2.10.4 ...
[info] Resolving org.scalamacros#quasiquotes_2.10;2.0.0 ...
[info] Resolving org.pegdown#pegdown;1.2.1 ...
[info] Resolving org.parboiled#parboiled-java;1.1.4 ...
[info] Resolving org.parboiled#parboiled-core;1.1.4 ...
[info] Resolving org.ow2.asm#asm;4.1 ...
[info] Resolving org.ow2.asm#asm-tree;4.1 ...
[info] Resolving org.ow2.asm#asm-analysis;4.1 ...
[info] Resolving org.ow2.asm#asm-util;4.1 ...
[info] Resolving org.scalaz#scalaz-core_2.10;7.1.0 ...
[info] Resolving org.scalaz#scalaz-concurrent_2.10;7.1.0 ...
[info] Resolving org.scalaz#scalaz-effect_2.10;7.1.0 ...
[info] Resolving org.scalacheck#scalacheck_2.10;1.11.3 ...
[info] Resolving org.scala-sbt#test-interface;1.0 ...
[info] Resolving org.hamcrest#hamcrest-core;1.3 ...
[info] Resolving org.mockito#mockito-core;1.9.5 ...
[info] Resolving org.objenesis#objenesis;1.0 ...
[info] Resolving junit#junit;4.11 ...
[info] Resolving org.specs2#classycle;1.4.3 ...
[info] Resolving org.scala-lang#scala-compiler;2.10.5 ...
[info] Resolving org.scala-lang#scala-reflect;2.10.5 ...
[info] Resolving org.scala-lang#jline;2.10.5 ...
[info] Resolving org.fusesource.jansi#jansi;1.4 ...
[info] Done updating.
[info] Compiling 1 Scala source to /Users/adam/src/mine/specs2-nested-examples-bug/target/scala-2.10/test-classes...
[info] NestedExamplesBugSpec
[info] + A
[info] x AA
[error]  '1' is not equal to '4' (NestedExamplesBugSpec.scala:23)
[info]
[info]
[info] AAA
[info] x BBB
[error]    '1' is not equal to '3' (NestedExamplesBugSpec.scala:31)
[info]
[info]
[info] AAAA
[info]   BBBB
[info]   x CCCC
[error]      '1' is not equal to '2' (NestedExamplesBugSpec.scala:38)
[info]
[info]
[info] Total for specification NestedExamplesBugSpec
[info] Finished in 24 ms
[info] 4 examples, 3 failures, 0 error
[error] Failed: Total 4, Failed 3, Errors 0, Passed 1
[error] Failed tests:
[error] 	org.decaf.specs2.NestedExamplesBugSpec
[error] (test:test) sbt.TestsFailedException: Tests unsuccessful
[error] Total time: 3 s, completed Apr 14, 2015 10:43:38 AM
```

#### Scala 2.11.6

```
> ++ 2.11.6
[info] Setting version to 2.11.6
[info] Reapplying settings...
[info] Set current project to specs2-nested-examples-bug (in build file:/Users/adam/src/mine/specs2-nested-examples-bug/)
> ;reload;update
[info] Loading global plugins from /Users/adam/.sbt/0.13/plugins
[info] Loading project definition from /Users/adam/src/mine/specs2-nested-examples-bug/project
[info] Set current project to specs2-nested-examples-bug (in build file:/Users/adam/src/mine/specs2-nested-examples-bug/)
[info] Updating {file:/Users/adam/src/mine/specs2-nested-examples-bug/}specs2-nested-examples-bug...
[info] Resolving org.scala-lang#scala-library;2.11.6 ...
[info] Resolving org.specs2#specs2_2.11;2.4.2 ...
[info] Resolving org.scala-lang#scala-compiler;2.11.2 ...
[info] Resolving org.scala-lang#scala-reflect;2.11.2 ...
[info] Resolving org.scala-lang.modules#scala-xml_2.11;1.0.2 ...
[info] Resolving org.scala-lang.modules#scala-parser-combinators_2.11;1.0.2 ...
[info] Resolving org.pegdown#pegdown;1.2.1 ...
[info] Resolving org.parboiled#parboiled-java;1.1.4 ...
[info] Resolving org.parboiled#parboiled-core;1.1.4 ...
[info] Resolving org.ow2.asm#asm;4.1 ...
[info] Resolving org.ow2.asm#asm-tree;4.1 ...
[info] Resolving org.ow2.asm#asm-analysis;4.1 ...
[info] Resolving org.ow2.asm#asm-util;4.1 ...
[info] Resolving org.scalaz#scalaz-core_2.11;7.1.0 ...
[info] Resolving org.scalaz#scalaz-concurrent_2.11;7.1.0 ...
[info] Resolving org.scalaz#scalaz-effect_2.11;7.1.0 ...
[info] Resolving org.scalacheck#scalacheck_2.11;1.11.3 ...
[info] Resolving org.scala-sbt#test-interface;1.0 ...
[info] Resolving org.hamcrest#hamcrest-core;1.3 ...
[info] Resolving org.mockito#mockito-core;1.9.5 ...
[info] Resolving org.objenesis#objenesis;1.0 ...
[info] Resolving junit#junit;4.11 ...
[info] Resolving org.specs2#classycle;1.4.3 ...
[info] Resolving org.scala-lang#scala-compiler;2.11.6 ...
[info] Resolving org.scala-lang#scala-reflect;2.11.6 ...
[info] Resolving org.scala-lang.modules#scala-xml_2.11;1.0.3 ...
[info] Resolving org.scala-lang.modules#scala-parser-combinators_2.11;1.0.3 ...
[info] Resolving jline#jline;2.12.1 ...
[info] Done updating.
[success] Total time: 0 s, completed Apr 14, 2015 10:46:43 AM
> test
[info] NestedExamplesBugSpec
[info] + A
[info] x AA
[error]  '1' is not equal to '4' (NestedExamplesBugSpec.scala:23)
[info]
[info]
[info] AAA
[info] x BBB
[error]    '1' is not equal to '3' (NestedExamplesBugSpec.scala:31)
[info]
[info]
[info] AAAA
[info]   BBBB
[info]   x CCCC
[error]      '1' is not equal to '2' (NestedExamplesBugSpec.scala:38)
[info]
[info]
[info] Total for specification NestedExamplesBugSpec
[info] Finished in 17 ms
[info] 4 examples, 3 failures, 0 error
[error] Failed: Total 4, Failed 3, Errors 0, Passed 1
[error] Failed tests:
[error] 	org.decaf.specs2.NestedExamplesBugSpec
[error] (test:test) sbt.TestsFailedException: Tests unsuccessful
[error] Total time: 1 s, completed Apr 14, 2015 10:46:47 AM
```

## Specs2 3.4

#### Scala 2.10.5

```
> ++ 2.10.5
[info] Setting version to 2.10.5
[info] Reapplying settings...
[info] Set current project to specs2-nested-examples-bug (in build file:/Users/adam/src/mine/specs2-nested-examples-bug/)
> test
[info] Updating {file:/Users/adam/src/mine/specs2-nested-examples-bug/}specs2-nested-examples-bug...
[info] Resolving org.scala-lang#scala-library;2.10.5 ...
[info] Resolving org.specs2#specs2-core_2.10;3.4 ...
[info] Resolving org.specs2#specs2-matcher_2.10;3.4 ...
[info] Resolving org.specs2#specs2-common_2.10;3.4 ...
[info] Resolving org.scalaz#scalaz-core_2.10;7.1.1 ...
[info] Resolving org.scalaz#scalaz-concurrent_2.10;7.1.1 ...
[info] Resolving org.scalaz#scalaz-effect_2.10;7.1.1 ...
[info] Resolving org.scalaz.stream#scalaz-stream_2.10;0.7a ...
[info] Resolving org.scodec#scodec-bits_2.10;1.0.6 ...
[info] Resolving org.scala-lang#scala-reflect;2.10.5 ...
[info] Resolving org.scalamacros#quasiquotes_2.10;2.0.1 ...
[info] Resolving org.scala-lang#scala-compiler;2.10.5 ...
[info] Resolving org.scala-lang#jline;2.10.5 ...
[info] Resolving org.fusesource.jansi#jansi;1.4 ...
[info] Done updating.
[info] Compiling 1 Scala source to /Users/adam/src/mine/specs2-nested-examples-bug/target/scala-2.10/test-classes...
[info] 'compiler-interface' not yet compiled for Scala 2.10.5. Compiling...
[info]   Compilation completed in 8.722 s
[info] NestedExamplesBugSpec
[info]
[info] + A
[error] x AA
[error]  '1' is not equal to '4' (NestedExamplesBugSpec.scala:23)
[info]
[info] AAA
[error]   x BBB
[error]    '1' is not equal to '3' (NestedExamplesBugSpec.scala:31)
[info]
[info] AAAA
[info]   BBBB
[error]     x CCCC
[error]      '1' is not equal to '2' (NestedExamplesBugSpec.scala:38)
[info]
[info]
[info] Total for specification NestedExamplesBugSpec
[info] Finished in 50 ms
[info] 4 examples, 3 failures, 0 error
[info]
[error] Failed: Total 4, Failed 3, Errors 0, Passed 1
[error] Failed tests:
[error] 	org.decaf.specs2.NestedExamplesBugSpec
[error] (test:test) sbt.TestsFailedException: Tests unsuccessful
[error] Total time: 12 s, completed Apr 14, 2015 10:43:15 AM
```

#### Scala 2.11.6

```
> ++ 2.11.6
[info] Setting version to 2.11.6
[info] Reapplying settings...
[info] Set current project to specs2-nested-examples-bug (in build file:/Users/adam/src/mine/specs2-nested-examples-bug/)
> ;reload;update
[info] Loading global plugins from /Users/adam/.sbt/0.13/plugins
[info] Loading project definition from /Users/adam/src/mine/specs2-nested-examples-bug/project
[info] Set current project to specs2-nested-examples-bug (in build file:/Users/adam/src/mine/specs2-nested-examples-bug/)
[info] Updating {file:/Users/adam/src/mine/specs2-nested-examples-bug/}specs2-nested-examples-bug...
[info] Resolving org.scala-lang#scala-library;2.11.6 ...
[info] Resolving org.specs2#specs2-core_2.11;3.4 ...
[info] Resolving org.specs2#specs2-matcher_2.11;3.4 ...
[info] Resolving org.specs2#specs2-common_2.11;3.4 ...
[info] Resolving org.scalaz#scalaz-core_2.11;7.1.1 ...
[info] Resolving org.scala-lang.modules#scala-parser-combinators_2.11;1.0.2 ...
[info] Resolving org.scala-lang.modules#scala-xml_2.11;1.0.2 ...
[info] Resolving org.scalaz#scalaz-concurrent_2.11;7.1.1 ...
[info] Resolving org.scalaz#scalaz-effect_2.11;7.1.1 ...
[info] Resolving org.scalaz.stream#scalaz-stream_2.11;0.7a ...
[info] Resolving org.scodec#scodec-bits_2.11;1.0.6 ...
[info] Resolving org.scala-lang#scala-reflect;2.11.6 ...
[info] Resolving org.scala-lang#scala-compiler;2.11.6 ...
[info] Resolving org.scala-lang.modules#scala-xml_2.11;1.0.3 ...
[info] Resolving org.scala-lang.modules#scala-parser-combinators_2.11;1.0.3 ...
[info] Resolving jline#jline;2.12.1 ...
[info] Done updating.
[success] Total time: 0 s, completed Apr 14, 2015 10:47:14 AM
> test
[info] Compiling 1 Scala source to /Users/adam/src/mine/specs2-nested-examples-bug/target/scala-2.11/test-classes...
[info] NestedExamplesBugSpec
[info]
[info] + A
[error] x AA
[error]  '1' is not equal to '4' (NestedExamplesBugSpec.scala:23)
[info]
[info] AAA
[error]   x BBB
[error]    '1' is not equal to '3' (NestedExamplesBugSpec.scala:31)
[info]
[info] AAAA
[info]   BBBB
[error]     x CCCC
[error]      '1' is not equal to '2' (NestedExamplesBugSpec.scala:38)
[info]
[info]
[info] Total for specification NestedExamplesBugSpec
[info] Finished in 51 ms
[info] 4 examples, 3 failures, 0 error
[info]
[error] Failed: Total 4, Failed 3, Errors 0, Passed 1
[error] Failed tests:
[error] 	org.decaf.specs2.NestedExamplesBugSpec
[error] (test:test) sbt.TestsFailedException: Tests unsuccessful
[error] Total time: 3 s, completed Apr 14, 2015 10:47:18 AM
```
